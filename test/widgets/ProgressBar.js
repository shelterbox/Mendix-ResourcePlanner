!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var r="object"==typeof exports?e(require("react")):e(t.react);for(var o in r)("object"==typeof exports?exports:t)[o]=r[o]}}(window,function(t){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(o,i,function(e){return t[e]}.bind(null,i));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(e,r){e.exports=t},function(t,e,r){var o;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var n=typeof o;if("string"===n||"number"===n)t.push(o);else if(Array.isArray(o)&&o.length){var s=i.apply(null,o);s&&t.push(s)}else if("object"===n)for(var a in o)r.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}void 0!==t&&t.exports?(i.default=i,t.exports=i):void 0===(o=function(){return i}.apply(e,[]))||(t.exports=o)}()},function(t,e,r){var o,i;o=[r,e,r(0),r(1)],void 0===(i=function(t,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alert=function(t){var e=t.className,i=t.bootstrapStyle,n=t.message;return n?r.createElement("div",{className:o("alert alert-"+i,e)},n):null},e.Alert.displayName="Alert"}.apply(e,o))||(t.exports=i)},function(t,e,r){var o,i,n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();o=[r,e,r(0),r(4),r(2)],void 0===(i=function(t,e,r,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(r){var o=t.call(this,r)||this;o.defaultMaximumValue=100;var i=o.updateValues(r.mxObject);return i.alertMessage=e.validateProps(r),i.showAlert=!!i.alertMessage,i.displayTextAttributeValue="",o.state=i,o.subscriptionHandles=[],o.handleClick=o.handleClick.bind(o),o.subscriptionCallback=function(t){return function(){return o.setState(o.updateValues(t))}},o}return n(e,t),e.parseStyle=function(t){void 0===t&&(t="");try{return t.split(";").reduce(function(t,e){var r=e.split(":");2===r.length&&(t[r[0].trim().replace(/(-.)/g,function(t){return t[1].toUpperCase()})]=r[1].trim());return t},{})}catch(e){console.log("Failed to parse style",t,e)}return{}},e.prototype.render=function(){return this.state.showAlert?r.createElement(i.Alert,{bootstrapStyle:"danger",className:"widget-progressbar",message:this.state.alertMessage}):r.createElement(o.ProgressBar,{alertMessage:this.state.alertMessage,barType:this.props.barType,bootstrapStyle:this.state.themeStyle,className:this.props.class,colorSwitch:this.props.textColorSwitch,displayText:this.props.displayText,displayTextValue:this.getDisplayTextValue(),maximumValue:this.props.maximumValueAttribute?this.state.maximumValue:this.props.staticMaximumValue,onClickAction:"doNothing"!==this.props.onClickOption&&this.props.mxObject?this.handleClick:void 0,progress:this.props.progressAttribute?this.state.progressValue||0:this.props.staticValue,style:e.parseStyle(this.props.style)})},e.prototype.componentWillReceiveProps=function(t){this.resetSubscription(t.mxObject),this.setState(this.updateValues(t.mxObject))},e.prototype.componentWillUnmount=function(){this.subscriptionHandles.forEach(window.mx.data.unsubscribe)},e.validateProps=function(t){var e="";return"callMicroflow"!==t.onClickOption||t.onClickMicroflow?"callNanoflow"!==t.onClickOption||t.onClickNanoflow.nanoflow?"showPage"!==t.onClickOption||t.onClickPage||(e="on click page is required in the 'Events' tab, 'Page' property"):e="on click nanoflow is required in the 'Events' tab, 'Nanoflow' property":e="on click microflow is required in the 'Events' tab, 'Microflow' property",e&&"Error in progress bar configuration: "+e},e.prototype.getValue=function(t,e,r){if(r&&t){var o=parseFloat(r.get(t));if(o||0===o)return o}return e},e.prototype.getBarStyle=function(t){return t&&this.props.bootstrapStyleAttribute?t.get(this.props.bootstrapStyleAttribute):this.props.bootstrapStyle},e.prototype.updateValues=function(t){return{displayTextAttributeValue:t?t.get(this.props.displayTextAttribute):"",maximumValue:this.getValue(this.props.maximumValueAttribute,this.defaultMaximumValue,t),progressValue:this.getValue(this.props.progressAttribute,void 0,t),themeStyle:this.getBarStyle(t)}},e.prototype.getDisplayTextValue=function(){return"attribute"===this.props.displayText?this.state.displayTextAttributeValue:"static"===this.props.displayText?this.props.displayTextStatic:""},e.prototype.resetSubscription=function(t){var e=this;this.subscriptionHandles.forEach(window.mx.data.unsubscribe),this.subscriptionHandles=[],t&&(this.subscriptionHandles.push(window.mx.data.subscribe({callback:this.subscriptionCallback(t),guid:t.getGuid()})),[this.props.progressAttribute,this.props.displayTextAttribute,this.props.maximumValueAttribute,this.props.bootstrapStyleAttribute].forEach(function(r){e.subscriptionHandles.push(window.mx.data.subscribe({attr:r,callback:e.subscriptionCallback(t),guid:t.getGuid()}))}))},e.prototype.handleClick=function(){var t=this.props,e=t.mxform,r=t.mxObject,o=t.onClickMicroflow,i=t.onClickNanoflow,n=t.onClickOption,s=t.onClickPage,a=t.openPageAs;if(r&&r.getGuid()){var l=new window.mendix.lib.MxContext;l.setContext(r.getEntity(),r.getGuid()),"callMicroflow"===n&&o?window.mx.ui.action(o,{context:l,error:function(t){return window.mx.ui.error("Error while executing microflow "+o+": "+t.message)},origin:e}):"callNanoflow"===n&&i.nanoflow?window.mx.data.callNanoflow({context:l,error:function(t){return mx.ui.error("An error occurred while executing the on click nanoflow: "+t.message)},nanoflow:i,origin:e}):"showPage"===n&&s&&window.mx.ui.openForm(s,{context:l,error:function(t){return window.mx.ui.error("Error while opening page "+s+": "+t.message)},location:a})}},e}(r.Component);e.default=s}.apply(e,o))||(t.exports=i)},function(t,e,r){var o,i,n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();o=[r,e,r(0),r(1),r(2),r(5)],void 0===(i=function(t,e,r,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(){var t=this.props,e=t.barType,n=t.bootstrapStyle,s=t.colorSwitch,a=t.displayText,l=t.displayTextValue,p=t.maximumValue,u=t.onClickAction,c=t.progress,f=this.progressValue(p,c);return r.createElement("div",{className:o("widget-progress-bar",this.props.className),style:this.props.style},r.createElement("div",{className:o("progress",{"widget-progress-bar-alert":!p||p<1,"widget-progress-bar-clickable":!!u,"widget-progress-bar-text-contrast":Math.abs(f)<s}),onClick:this.props.onClickAction},r.createElement("div",{className:o("progress-bar","progress-bar-"+(n||"default"),{active:"animated"===e,"progress-bar-striped":"striped"===e||"animated"===e,"widget-progress-bar-negative":f<0}),style:{width:Math.abs(f)+"%"}},this.getProgressText(p,c,a,l))),r.createElement(i.Alert,{bootstrapStyle:"danger",className:"widget-progressbar",message:this.props.alertMessage}))},e.prototype.progressValue=function(t,e){return"number"!=typeof e||t<1?0:e>t||Math.abs(this.calculatePercentage(e,t))>100?100:this.calculatePercentage(e,t)},e.prototype.calculatePercentage=function(t,e){return Math.round(t/e*100)},e.prototype.getProgressText=function(t,e,r,o){return null===e||void 0===e||"none"===r?"":t<=0?"Invalid":"value"===r?""+this.calculatePercentage(e,t):"percentage"===r?this.calculatePercentage(e,t)+"%":("static"===r||"attribute"===r)&&o||""},e.defaultProps={barType:"default",bootstrapStyle:"default",colorSwitch:50,displayText:"percentage",maximumValue:100},e}(r.Component);e.ProgressBar=s}.apply(e,o))||(t.exports=i)},function(t,e){}])});